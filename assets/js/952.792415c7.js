"use strict";(self["webpackChunkinteresting_util_client"]=self["webpackChunkinteresting_util_client"]||[]).push([[952],{81:function(e,t,o){var n=o(9565),l=o(9306),r=o(8551),a=o(6823),i=o(851),u=TypeError;e.exports=function(e,t){var o=arguments.length<2?i(e):t;if(l(o))return r(n(o,e));throw new u(a(e)+" is not iterable")}},397:function(e,t,o){var n=o(7751);e.exports=n("document","documentElement")},655:function(e,t,o){var n=o(6955),l=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return l(e)}},679:function(e,t,o){var n=o(1625),l=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new l("Incorrect invocation")}},851:function(e,t,o){var n=o(6955),l=o(5966),r=o(4117),a=o(6269),i=o(8227),u=i("iterator");e.exports=function(e){if(!r(e))return l(e,u)||l(e,"@@iterator")||a[n(e)]}},1072:function(e,t,o){var n=o(1828),l=o(8727);e.exports=Object.keys||function(e){return n(e,l)}},1108:function(e,t,o){var n=o(6955);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},1767:function(e){e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},2106:function(e,t,o){var n=o(283),l=o(4913);e.exports=function(e,t,o){return o.get&&n(o.get,t,{getter:!0}),o.set&&n(o.set,t,{setter:!0}),l.f(e,t,o)}},2140:function(e,t,o){var n=o(8227),l=n("toStringTag"),r={};r[l]="z",e.exports="[object z]"===String(r)},2211:function(e,t,o){var n=o(9039);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},2360:function(e,t,o){var n,l=o(8551),r=o(6801),a=o(8727),i=o(421),u=o(397),c=o(4055),s=o(6119),f=">",v="<",d="prototype",p="script",y=s("IE_PROTO"),m=function(){},g=function(e){return v+p+f+e+v+"/"+p+f},h=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=c("iframe"),o="java"+p+":";return t.style.display="none",u.appendChild(t),t.src=String(o),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},_=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}_="undefined"!=typeof document?document.domain&&n?h(n):b():h(n);var e=a.length;while(e--)delete _[d][a[e]];return _()};i[y]=!0,e.exports=Object.create||function(e,t){var o;return null!==e?(m[d]=l(e),o=new m,m[d]=null,o[y]=e):o=_(),void 0===t?o:r.f(o,t)}},2603:function(e,t,o){var n=o(655);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},2652:function(e,t,o){var n=o(6080),l=o(9565),r=o(8551),a=o(6823),i=o(4209),u=o(6198),c=o(1625),s=o(81),f=o(851),v=o(9539),d=TypeError,p=function(e,t){this.stopped=e,this.result=t},y=p.prototype;e.exports=function(e,t,o){var m,g,h,b,_,w,k,E=o&&o.that,x=!(!o||!o.AS_ENTRIES),R=!(!o||!o.IS_RECORD),A=!(!o||!o.IS_ITERATOR),T=!(!o||!o.INTERRUPTED),C=n(t,E),I=function(e){return m&&v(m,"normal"),new p(!0,e)},S=function(e){return x?(r(e),T?C(e[0],e[1],I):C(e[0],e[1])):T?C(e,I):C(e)};if(R)m=e.iterator;else if(A)m=e;else{if(g=f(e),!g)throw new d(a(e)+" is not iterable");if(i(g)){for(h=0,b=u(e);b>h;h++)if(_=S(e[h]),_&&c(y,_))return _;return new p(!1)}m=s(e,g)}w=R?e.next:m.next;while(!(k=l(w,m)).done){try{_=S(k.value)}catch(F){v(m,"throw",F)}if("object"==typeof _&&_&&c(y,_))return _}return new p(!1)}},2787:function(e,t,o){var n=o(9297),l=o(4901),r=o(8981),a=o(6119),i=o(2211),u=a("IE_PROTO"),c=Object,s=c.prototype;e.exports=i?c.getPrototypeOf:function(e){var t=r(e);if(n(t,u))return t[u];var o=t.constructor;return l(o)&&t instanceof o?o.prototype:t instanceof c?s:null}},2967:function(e,t,o){var n=o(6706),l=o(34),r=o(7750),a=o(3506);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{e=n(Object.prototype,"__proto__","set"),e(o,[]),t=o instanceof Array}catch(i){}return function(o,n){return r(o),a(n),l(o)?(t?e(o,n):o.__proto__=n,o):o}}():void 0)},3167:function(e,t,o){var n=o(4901),l=o(34),r=o(2967);e.exports=function(e,t,o){var a,i;return r&&n(a=t.constructor)&&a!==o&&l(i=a.prototype)&&i!==o.prototype&&r(e,i),e}},3506:function(e,t,o){var n=o(3925),l=String,r=TypeError;e.exports=function(e){if(n(e))return e;throw new r("Can't set "+l(e)+" as a prototype")}},3925:function(e,t,o){var n=o(34);e.exports=function(e){return n(e)||null===e}},3952:function(e,t,o){o.r(t),o.d(t,{default:function(){return W}});o(4114),o(8111),o(7588),o(9577),o(4979);var n=o(641),l=o(953),r=o(33),a=o(163),i=o(8548),u=o(5638);const c={class:"epub-reader"},s={class:"reader-container"},f={key:0,class:"upload-section"},v={class:"upload-card"},d={key:1,class:"reading-section"},p={class:"content-area"},y={key:0,class:"toc-sidebar"},m={class:"toc-list"},g=["onClick"],h={key:1,class:"settings-sidebar"},b={class:"setting-group"},_={class:"setting-group"},w={class:"font-size-controls"},k={class:"font-size-display"},E={class:"setting-group"},x={class:"tooltip-content"},R={class:"selected-text-preview"},A={class:"tooltip-actions"},T={class:"right-toolbar"},C={class:"book-info"},I={key:0},S={class:"page-info"},F={class:"controls"},L={style:{display:"flex"}},O={style:{flex:"1","min-width":"0",display:"flex","align-items":"center","justify-content":"center"}},z={style:{height:"700px","overflow-y":"auto",width:"100%",display:"flex","align-items":"center","justify-content":"center"}},D=["src"],M={style:{width:"100px","margin-left":"12px",display:"flex","flex-direction":"column",gap:"12px",height:"100%","box-sizing":"border-box"}},U={style:{display:"flex","align-items":"center",gap:"4px"}},K={style:{"min-width":"32px","text-align":"center"}},N=4718592;var V={__name:"EpubReader",setup(e){const t=(0,l.KR)(null),V=(0,l.KR)(""),$=(0,l.KR)(""),B=(0,l.KR)(1),W=(0,l.KR)(1),j=(0,l.KR)(""),P=(0,l.KR)(!1),X=(0,l.KR)([]),Y=(0,l.KR)(null),H=(0,l.KR)(null),Q=(0,l.KR)(16),G=(0,l.KR)("Arial"),q=(0,l.KR)("#ffffff"),Z=(0,l.KR)(!1),J=(0,l.KR)([]),ee=(0,l.KR)(!1),te=(0,l.KR)(""),oe=(0,l.KR)("#ffeb3b"),ne=(0,l.KR)(""),le=(0,l.KR)(0),re=(0,l.KR)(0),ae=(0,l.KR)({left:"0px",top:"0px",position:"absolute"}),ie=[{label:"白色",value:"#ffffff"},{label:"米色",value:"#f5f5dc"},{label:"浅灰",value:"#f8f8f8"},{label:"浅黄",value:"#fefefe"},{label:"护眼绿",value:"#c7edcc"},{label:"夜间模式",value:"#2c2c2c"},{label:"浅蓝",value:"#eaf4ff"},{label:"浅粉",value:"#fff0f6"},{label:"浅紫",value:"#f3e8ff"},{label:"暗夜蓝",value:"#232946"},{label:"暖米黄",value:"#fdf6e3"},{label:"暖灰",value:"#ececec"},{label:"蓝紫渐变",value:"linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)"}],ue={"#ffffff":"#222","#f5f5dc":"#222","#f8f8f8":"#222","#fefefe":"#222","#c7edcc":"#222","#eaf4ff":"#222","#fff0f6":"#8e4a6b","#f3e8ff":"#6b4a8e","#ececec":"#222","#fdf6e3":"#6b4e16","#2c2c2c":"#fff","#232946":"#fff","linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%)":"#222"},ce=(0,n.EW)(()=>ue[q.value]||"#222");let se=null,fe=null;const ve=(0,l.KR)(""),de=(0,l.KR)(Q.value);function pe(e){let t="";const o=new Uint8Array(e),n=o.byteLength;for(let l=0;l<n;l++)t+=String.fromCharCode(o[l]);return btoa(t)}const ye=()=>{const e=localStorage.getItem("epub-book-base64");if(e){const t=atob(e),o=t.length,n=new Uint8Array(o);for(let e=0;e<o;e++)n[e]=t.charCodeAt(e);ge(n.buffer)}};(0,n.sV)(()=>{ye()});const me=e=>{if("application/epub+zip"!==e.raw.type&&!e.raw.name.endsWith(".epub"))return void a.nk.error("请上传有效的EPUB文件");if(e.raw.size>N){a.nk.error("文件过大，无法自动保存到本地。请上传小于4.5MB的EPUB文件。");const t=new FileReader;return t.onload=e=>{ge(e.target.result)},void t.readAsArrayBuffer(e.raw)}const t=new FileReader;t.onload=e=>{const t=e.target.result,o=pe(t);try{localStorage.setItem("epub-book-base64",o)}catch(e){a.nk.warning("文件过大，未能保存到本地，下次需重新上传。")}ge(t)},t.readAsArrayBuffer(e.raw)},ge=async e=>{try{console.log("开始加载EPUB文件..."),se&&(se.destroy(),se=null),console.log("导入epubjs...");const l=await o.e(432).then(o.bind(o,6432));console.log("epubjs导入成功:",l);const r=l.default||l.Book||l;console.log("使用Book构造函数:",r),console.log("创建Book实例..."),fe=new r(e),console.log("Book实例创建成功"),console.log("等待Book ready..."),await fe.ready,console.log("Book ready完成"),console.log("获取书籍信息...");const i=await fe.loaded.metadata;V.value=i.title||"未知标题",$.value=i.creator||"",console.log("书籍信息:",i),console.log("获取目录...");const u=await fe.loaded.navigation;if(X.value=u.toc||[],console.log("目录数据:",u),console.log("设置book状态..."),t.value=fe,console.log("book状态已设置:",t.value),console.log("等待DOM更新..."),await(0,n.dY)(),console.log("DOM更新完成"),await new Promise(e=>setTimeout(e,100)),console.log("检查viewer元素:",H.value),console.log("viewerElement类型:",typeof H.value),console.log("viewerElement是否为HTMLElement:",H.value instanceof HTMLElement),!H.value)throw new Error("Viewer element not found - DOM可能还没有完全渲染");H.value.innerHTML="",console.log("viewer元素已清空"),console.log("初始化渲染器..."),se=fe.renderTo(H.value,{width:"100%",height:"100%",flow:"scrolled-doc",manager:"continuous"}),se.themes.default({body:{"font-family":G.value,"font-size":`${Q.value}px`,"background-color":q.value},p:{"font-family":G.value,"font-size":`${Q.value}px`},div:{"font-family":G.value,"font-size":`${Q.value}px`},span:{"font-family":G.value,"font-size":`${Q.value}px`}}),se.themes.register("background",q.value),se.themes.select("background",q.value),console.log("显示内容..."),await se.display(),setTimeout(()=>{ke()},200),we(),Ce();const c=await fe.spine;W.value=c.length,B.value=1,console.log("初始化页码:",B.value,"总页数:",W.value),setTimeout(()=>{Ce()},500),a.nk.success("书籍加载成功！")}catch(l){console.error("加载书籍失败:",l),console.error("错误堆栈:",l.stack),a.nk.error(`加载书籍失败: ${l.message}`),se&&(se.destroy(),se=null),fe=null}},he=()=>{console.log("点击上一页，当前页码:",B.value),se&&B.value>1?(se.prev(),setTimeout(()=>{B.value=Math.max(1,B.value-1),console.log("上一页后页码:",B.value)},100)):console.log("上一页按钮被禁用，当前页码:",B.value)},be=()=>{console.log("点击下一页，当前页码:",B.value,"总页数:",W.value),se&&B.value<W.value?(se.next(),setTimeout(()=>{B.value=Math.min(W.value,B.value+1),console.log("下一页后页码:",B.value)},100)):console.log("下一页按钮被禁用，当前页码:",B.value,"总页数:",W.value)},_e=e=>{se&&(se.display(e),P.value=!1,B.value=1)},we=()=>{se&&(se.on("relocated",e=>{if(console.log("页面变化:",e),e&&e.start&&e.start.location){const t=e.start.location;B.value=t>0?t:1,console.log("relocated事件更新页码为:",B.value)}else B.value=Math.max(1,B.value),console.log("relocated事件使用默认页码:",B.value)}),se.on("rendered",e=>{console.log("页面渲染完成:",e),B.value<=0&&(B.value=1,console.log("rendered事件修正页码为:",B.value))}),setTimeout(()=>{B.value<=0&&(B.value=1,console.log("初始化修正页码为:",B.value))},200))},ke=()=>{if(se&&H.value){const e=H.value.querySelector("iframe");if(e&&e.contentDocument){const t=e.contentDocument.querySelectorAll("style[data-epub-reader]");t.forEach(e=>e.remove());const o=e.contentDocument.createElement("style");o.setAttribute("data-epub-reader","true"),o.textContent=`\n        body {\n          background-color: ${q.value} !important;\n          font-family: ${G.value} !important;\n          font-size: ${Q.value}px !important;\n          line-height: 1.6 !important;\n          color: ${ce.value} !important;\n        }\n        p, div, span, h1, h2, h3, h4, h5, h6 {\n          font-family: ${G.value} !important;\n          font-size: ${Q.value}px !important;\n          color: ${ce.value} !important;\n        }\n        * {\n          font-family: ${G.value} !important;\n        }\n      `,e.contentDocument.head.appendChild(o)}}},Ee=()=>{if(se){console.log("更新字体:",G.value);const e=se.location;se.themes.default({body:{"font-family":G.value,"font-size":`${Q.value}px`,"background-color":q.value},p:{"font-family":G.value,"font-size":`${Q.value}px`},div:{"font-family":G.value,"font-size":`${Q.value}px`},span:{"font-family":G.value,"font-size":`${Q.value}px`}}),se.themes.select("default"),e&&se.display(e.start.href),setTimeout(()=>{ke()},100)}},xe=()=>{Q.value<24&&(Q.value+=2,console.log("增加字体大小到:",Q.value),Ae())},Re=()=>{Q.value>12&&(Q.value-=2,console.log("减少字体大小到:",Q.value),Ae())},Ae=()=>{if(se){console.log("更新字体大小:",Q.value);const e=se.location;se.themes.default({body:{"font-family":G.value,"font-size":`${Q.value}px`,"background-color":q.value},p:{"font-family":G.value,"font-size":`${Q.value}px`},div:{"font-family":G.value,"font-size":`${Q.value}px`},span:{"font-family":G.value,"font-size":`${Q.value}px`}}),se.themes.select("default"),e&&se.display(e.start.href),setTimeout(()=>{ke()},100)}},Te=()=>{if(se){console.log("更新背景:",q.value);const e=se.location;se.themes.default({body:{"font-family":G.value,"font-size":`${Q.value}px`,"background-color":q.value},p:{"font-family":G.value,"font-size":`${Q.value}px`},div:{"font-family":G.value,"font-size":`${Q.value}px`},span:{"font-family":G.value,"font-size":`${Q.value}px`}}),se.themes.select("default"),H.value&&(H.value.style.backgroundColor=q.value),e&&se.display(e.start.href),setTimeout(()=>{ke()},100)}},Ce=()=>{console.log("设置文本选择功能"),se&&se.on("selected",async function(e){console.log("epub.js selected事件触发:",e);try{ne.value=e;const t=await fe.getRange(e);if(t){const e=t.toString().trim();console.log("选中的文本:",e),e&&(te.value=e,Ve())}}catch(t){console.error("获取选中文本失败:",t)}}),document.addEventListener("selectionchange",()=>{console.log("选择变化事件触发");const e=window.getSelection();if(console.log("当前选择对象:",e),e&&e.toString().trim()){const t=e.toString().trim();console.log("选中的文本:",t),te.value=t,Ve()}}),document.addEventListener("mouseup",e=>{console.log("鼠标抬起事件"),le.value=e.screenX,re.value=e.screenY,setTimeout(()=>{const e=window.getSelection();if(e&&e.toString().trim()){const t=e.toString().trim();console.log("鼠标选择文本:",t),te.value=t,Ve()}},100)}),document.addEventListener("mousemove",e=>{le.value=e.screenX,re.value=e.screenY})},Ie=()=>{te.value="",ne.value="",window.getSelection&&window.getSelection().removeAllRanges()},Se=(0,l.KR)(!1),Fe=(0,l.KR)(""),Le=(0,l.KR)(q.value),Oe=(0,l.KR)(G.value),ze=(0,l.KR)(ce.value),De=()=>{if(Fe.value){const e=document.createElement("a");e.download=`选中文本_${(new Date).getTime()}.png`,e.href=Fe.value,e.click()}};(0,n.wB)(Se,e=>{e&&(Le.value=q.value,Oe.value=G.value,ze.value=ce.value,Me())}),(0,n.wB)([Le,Oe,ze,de,ve],()=>{Se.value&&Me()});const Me=async()=>{if(!ve.value)return;const e=await o.e(354).then(o.t.bind(o,354,23)),t=3,n=420,l=document.createElement("div");l.style.cssText=`\n    position: fixed;\n    top: -9999px;\n    left: -9999px;\n    width: ${n}px;\n    height: 700px;\n    padding: 2.2rem 1.5rem 1.5rem 1.5rem;\n    background: linear-gradient(135deg, #f6fce9 0%, #e8f5e9 100%);\n    border-radius: 18px;\n    box-shadow: 0 4px 24px 0 rgba(0,0,0,0.10), 0 1.5px 4px 0 rgba(0,0,0,0.03);\n    font-family: 'FZKai-Z03', '楷体', 'STKaiti', '仿宋', serif;\n    font-size: ${de.value}px;\n    color: #7ca05b;\n    line-height: 2.2;\n    text-align: left;\n    z-index: -1;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: flex-start;\n    position: relative;\n    box-sizing: border-box;\n    overflow: hidden;\n  `;const r=document.createElement("div");r.innerHTML='<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><text x="0" y="28" font-size="32" fill="#e6e6e6" font-family="serif">"</text></svg>',r.style.cssText="\n    position: absolute;\n    top: 1.1rem;\n    left: 1.2rem;\n    width: 36px;\n    height: 36px;\n    opacity: 1;\n    pointer-events: none;\n  ",l.appendChild(r);const a=document.createElement("div");a.style.cssText="\n    margin: 0.5rem 0 0.7rem 0;\n    font-weight: 500;\n    word-break: break-all;\n    white-space: pre-wrap;\n    min-height: 120px;\n    width: 100%;\n    text-align: left;\n    flex: 1;\n  ",a.textContent=ve.value;const i=document.createElement("div");i.style.cssText="\n    font-size: 0.98rem;\n    font-family: 'PingFang SC', 'Microsoft YaHei', Arial, sans-serif;\n    opacity: 0.85;\n    margin-left: 0.1rem;\n    margin-bottom: 0.2rem;\n    text-align: right;\n    align-self: flex-end;\n    width: 100%;\n    margin-top: 1rem;\n    color: #7ca05b;\n  ",i.textContent=(new Date).toISOString().slice(0,10),l.appendChild(a),l.appendChild(i),document.body.appendChild(l);const u=l.offsetWidth,c=l.offsetHeight,s=await e.default(l,{scale:t,backgroundColor:null,width:u,height:c});document.body.removeChild(l),Fe.value=s.toDataURL()},Ue=async()=>{te.value&&(ve.value=te.value,Se.value=!0,te.value="",a.nk.success("图片已生成，可预览和下载"))},Ke=()=>{if(te.value){const t={text:te.value,color:oe.value,timestamp:(new Date).toLocaleString(),id:`highlight_${Date.now()}`,cfiRange:ne.value};if(J.value.push(t),ne.value&&se)try{se.annotations.add("highlight",ne.value,{color:oe.value}),console.log("添加epub.js高亮:",ne.value)}catch(e){console.error("添加epub.js高亮失败:",e)}te.value="",ne.value="",window.getSelection&&window.getSelection().removeAllRanges(),a.nk.success("划线添加成功！")}},Ne=()=>{se&&(se.destroy(),se=null),H.value&&(H.value.innerHTML=""),t.value=null,V.value="",$.value="",B.value=1,W.value=1,j.value="",P.value=!1,X.value=[],fe=null,localStorage.removeItem("epub-book-base64")};(0,n.hi)(()=>{se&&se.destroy()});const Ve=async()=>{await(0,n.dY)();const e=window.getSelection(),t=document.querySelector(".tooltip-panel"),o=document.querySelector(".reader-view");if(e&&e.rangeCount>0&&t&&o){const n=e.getRangeAt(0),l=n.getBoundingClientRect(),r=o.getBoundingClientRect(),a=t.offsetWidth||320,i=t.offsetHeight||48,u=12;let c=l.left+l.width/2-a/2-r.left;const s=r.bottom-l.bottom;let f;f=s>i+u?l.bottom-r.top+u:l.top-r.top-i-u,c=Math.max(8,Math.min(c,r.width-a-8)),f=Math.max(8,Math.min(f,r.height-i-8)),ae.value={left:`${c}px`,top:`${f}px`,position:"absolute"}}};return(e,o)=>{const a=(0,n.g2)("el-icon"),N=(0,n.g2)("el-upload"),J=(0,n.g2)("el-option"),oe=(0,n.g2)("el-select"),ne=(0,n.g2)("el-button"),le=(0,n.g2)("el-color-picker"),re=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(u.A),(0,n.Lk)("div",s,[t.value?((0,n.uX)(),(0,n.CE)("div",d,[(0,n.Lk)("div",p,[P.value?((0,n.uX)(),(0,n.CE)("div",y,[o[16]||(o[16]=(0,n.Lk)("h4",null,"目录",-1)),(0,n.Lk)("div",m,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(X.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:(0,r.C4)(["toc-item",{active:j.value===e.href}]),onClick:t=>_e(e.href)},(0,r.v_)(e.label),11,g))),128))])])):(0,n.Q3)("",!0),Z.value?((0,n.uX)(),(0,n.CE)("div",h,[o[22]||(o[22]=(0,n.Lk)("h4",null,"阅读设置",-1)),(0,n.Lk)("div",b,[o[17]||(o[17]=(0,n.Lk)("label",null,"字体：",-1)),(0,n.bF)(oe,{modelValue:G.value,"onUpdate:modelValue":o[0]||(o[0]=e=>G.value=e),onChange:Ee,size:"small"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.fontOptions,e=>((0,n.uX)(),(0,n.Wv)(J,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),(0,n.Lk)("div",_,[o[20]||(o[20]=(0,n.Lk)("label",null,"字体大小：",-1)),(0,n.Lk)("div",w,[(0,n.bF)(ne,{onClick:Re,size:"small"},{default:(0,n.k6)(()=>o[18]||(o[18]=[(0,n.eW)("A-")])),_:1,__:[18]}),(0,n.Lk)("span",k,(0,r.v_)(Q.value)+"px",1),(0,n.bF)(ne,{onClick:xe,size:"small"},{default:(0,n.k6)(()=>o[19]||(o[19]=[(0,n.eW)("A+")])),_:1,__:[19]})])]),(0,n.Lk)("div",E,[o[21]||(o[21]=(0,n.Lk)("label",null,"背景：",-1)),(0,n.bF)(oe,{modelValue:q.value,"onUpdate:modelValue":o[1]||(o[1]=e=>q.value=e),onChange:Te,size:"small"},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(ie,e=>(0,n.bF)(J,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:"reader-view",ref_key:"readerView",ref:Y},[(0,n.Lk)("div",{ref_key:"viewerElement",ref:H,class:"epub-viewer"},null,512),te.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"tooltip-panel",style:(0,r.Tr)(ae.value)},[(0,n.Lk)("div",x,[(0,n.bF)(ne,{onClick:Ie,size:"small",class:"tooltip-close-btn",circle:"",plain:""},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.Close))]),_:1})]),_:1}),(0,n.Lk)("div",R,(0,r.v_)(te.value),1),(0,n.Lk)("div",A,[(0,n.bF)(ne,{onClick:Ke,type:"primary",size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.Edit))]),_:1}),o[23]||(o[23]=(0,n.eW)(" 添加划线 "))]),_:1,__:[23]}),(0,n.bF)(ne,{onClick:Ue,type:"success",size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>o[24]||(o[24]=[(0,n.Lk)("picture",null,null,-1)])),_:1,__:[24]}),o[25]||(o[25]=(0,n.eW)(" 导出图片 "))]),_:1,__:[25]})])]),o[26]||(o[26]=(0,n.Lk)("div",{class:"tooltip-arrow"},null,-1))],4)):(0,n.Q3)("",!0)],512),(0,n.Lk)("div",T,[(0,n.Lk)("div",C,[(0,n.Lk)("h3",null,(0,r.v_)(V.value),1),$.value?((0,n.uX)(),(0,n.CE)("p",I,"作者: "+(0,r.v_)($.value),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",S,[(0,n.Lk)("span",null,(0,r.v_)(B.value)+" / "+(0,r.v_)(W.value),1)]),(0,n.Lk)("div",F,[(0,n.bF)(ne,{onClick:he,disabled:B.value<=1,size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.ArrowLeft))]),_:1}),o[27]||(o[27]=(0,n.eW)(" 上一页 "))]),_:1,__:[27]},8,["disabled"]),(0,n.bF)(ne,{onClick:be,disabled:B.value>=W.value,size:"small"},{default:(0,n.k6)(()=>[o[28]||(o[28]=(0,n.eW)(" 下一页 ")),(0,n.bF)(a,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.ArrowRight))]),_:1})]),_:1,__:[28]},8,["disabled"]),(0,n.bF)(ne,{onClick:o[2]||(o[2]=e=>P.value=!P.value),size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>o[29]||(o[29]=[(0,n.Lk)("menu",null,null,-1)])),_:1,__:[29]}),o[30]||(o[30]=(0,n.eW)(" 目录 "))]),_:1,__:[30]}),(0,n.bF)(ne,{onClick:o[3]||(o[3]=e=>Z.value=!Z.value),size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.Setting))]),_:1}),o[31]||(o[31]=(0,n.eW)(" 设置 "))]),_:1,__:[31]}),(0,n.bF)(ne,{onClick:o[4]||(o[4]=e=>ee.value=!ee.value),size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.Edit))]),_:1}),o[32]||(o[32]=(0,n.eW)(" 划线 "))]),_:1,__:[32]}),(0,n.bF)(ne,{onClick:Ne,size:"small"},{default:(0,n.k6)(()=>[(0,n.bF)(a,null,{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.Refresh))]),_:1}),o[33]||(o[33]=(0,n.eW)(" 重新上传 "))]),_:1,__:[33]})])])])])):((0,n.uX)(),(0,n.CE)("div",f,[(0,n.Lk)("div",v,[o[14]||(o[14]=(0,n.Lk)("h2",null,"EPUB 在线阅读器",-1)),o[15]||(o[15]=(0,n.Lk)("p",null,"上传您的EPUB文件开始阅读",-1)),(0,n.bF)(N,{class:"upload-area",drag:"",accept:".epub","auto-upload":!1,"show-file-list":!1,"on-change":me},{tip:(0,n.k6)(()=>o[12]||(o[12]=[(0,n.Lk)("div",{class:"el-upload__tip"}," 只能上传 epub 文件 ",-1)])),default:(0,n.k6)(()=>[(0,n.bF)(a,{class:"el-icon--upload"},{default:(0,n.k6)(()=>[(0,n.bF)((0,l.R1)(i.UploadFilled))]),_:1}),o[13]||(o[13]=(0,n.Lk)("div",{class:"el-upload__text"},[(0,n.eW)(" 将文件拖到此处，或"),(0,n.Lk)("em",null,"点击上传")],-1))]),_:1,__:[13]})])]))]),(0,n.bF)(re,{modelValue:Se.value,"onUpdate:modelValue":o[11]||(o[11]=e=>Se.value=e),title:"图片预览",width:"480px",center:""},{footer:(0,n.k6)(()=>[(0,n.bF)(ne,{onClick:o[10]||(o[10]=e=>Se.value=!1)},{default:(0,n.k6)(()=>o[36]||(o[36]=[(0,n.eW)("关闭")])),_:1,__:[36]}),(0,n.bF)(ne,{type:"primary",onClick:De},{default:(0,n.k6)(()=>o[37]||(o[37]=[(0,n.eW)("下载图片")])),_:1,__:[37]})]),default:(0,n.k6)(()=>[(0,n.Lk)("div",L,[(0,n.Lk)("div",O,[(0,n.Lk)("div",z,[(0,n.Lk)("img",{src:Fe.value,style:{width:"420px",height:"auto","border-radius":"8px","user-select":"auto",cursor:"pointer"},alt:"导出图片预览",draggable:"true"},null,8,D)])]),(0,n.Lk)("div",M,[(0,n.bF)(oe,{modelValue:Oe.value,"onUpdate:modelValue":o[5]||(o[5]=e=>Oe.value=e),placeholder:"字体",size:"small"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.fontOptions,e=>((0,n.uX)(),(0,n.Wv)(J,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),(0,n.Lk)("div",U,[(0,n.bF)(ne,{onClick:o[6]||(o[6]=e=>{de.value=Math.max(12,de.value-2),Me()}),size:"small"},{default:(0,n.k6)(()=>o[34]||(o[34]=[(0,n.eW)("A-")])),_:1,__:[34]}),(0,n.Lk)("span",K,(0,r.v_)(de.value)+"px",1),(0,n.bF)(ne,{onClick:o[7]||(o[7]=e=>{de.value=Math.min(36,de.value+2),Me()}),size:"small"},{default:(0,n.k6)(()=>o[35]||(o[35]=[(0,n.eW)("A+")])),_:1,__:[35]})]),(0,n.bF)(oe,{modelValue:Le.value,"onUpdate:modelValue":o[8]||(o[8]=e=>Le.value=e),placeholder:"背景",size:"small"},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(ie,e=>(0,n.bF)(J,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),(0,n.bF)(le,{modelValue:ze.value,"onUpdate:modelValue":o[9]||(o[9]=e=>ze.value=e),size:"small"},null,8,["modelValue"])])])]),_:1},8,["modelValue"])])}}},$=o(6262);const B=(0,$.A)(V,[["__scopeId","data-v-3b1a2ecd"]]);var W=B},4209:function(e,t,o){var n=o(8227),l=o(6269),r=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(l.Array===e||a[r]===e)}},4549:function(e,t,o){var n=o(4576);e.exports=function(e,t){var o=n.Iterator,l=o&&o.prototype,r=l&&l[e],a=!1;if(r)try{r.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(i){i instanceof t||(a=!1)}if(!a)return r}},4644:function(e,t,o){var n,l,r,a=o(7811),i=o(3724),u=o(4576),c=o(4901),s=o(34),f=o(9297),v=o(6955),d=o(6823),p=o(6699),y=o(6840),m=o(2106),g=o(1625),h=o(2787),b=o(2967),_=o(8227),w=o(3392),k=o(1181),E=k.enforce,x=k.get,R=u.Int8Array,A=R&&R.prototype,T=u.Uint8ClampedArray,C=T&&T.prototype,I=R&&h(R),S=A&&h(A),F=Object.prototype,L=u.TypeError,O=_("toStringTag"),z=w("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",M=a&&!!b&&"Opera"!==v(u.opera),U=!1,K={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},V=function(e){if(!s(e))return!1;var t=v(e);return"DataView"===t||f(K,t)||f(N,t)},$=function(e){var t=h(e);if(s(t)){var o=x(t);return o&&f(o,D)?o[D]:$(t)}},B=function(e){if(!s(e))return!1;var t=v(e);return f(K,t)||f(N,t)},W=function(e){if(B(e))return e;throw new L("Target is not a typed array")},j=function(e){if(c(e)&&(!b||g(I,e)))return e;throw new L(d(e)+" is not a typed array constructor")},P=function(e,t,o,n){if(i){if(o)for(var l in K){var r=u[l];if(r&&f(r.prototype,e))try{delete r.prototype[e]}catch(a){try{r.prototype[e]=t}catch(c){}}}S[e]&&!o||y(S,e,o?t:M&&A[e]||t,n)}},X=function(e,t,o){var n,l;if(i){if(b){if(o)for(n in K)if(l=u[n],l&&f(l,e))try{delete l[e]}catch(r){}if(I[e]&&!o)return;try{return y(I,e,o?t:M&&I[e]||t)}catch(r){}}for(n in K)l=u[n],!l||l[e]&&!o||y(l,e,t)}};for(n in K)l=u[n],r=l&&l.prototype,r?E(r)[D]=l:M=!1;for(n in N)l=u[n],r=l&&l.prototype,r&&(E(r)[D]=l);if((!M||!c(I)||I===Function.prototype)&&(I=function(){throw new L("Incorrect invocation")},M))for(n in K)u[n]&&b(u[n],I);if((!M||!S||S===F)&&(S=I.prototype,M))for(n in K)u[n]&&b(u[n].prototype,S);if(M&&h(C)!==S&&b(C,S),i&&!f(S,O))for(n in U=!0,m(S,O,{configurable:!0,get:function(){return s(this)?this[z]:void 0}}),K)u[n]&&p(u[n],z,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:U&&z,aTypedArray:W,aTypedArrayConstructor:j,exportTypedArrayMethod:P,exportTypedArrayStaticMethod:X,getTypedArrayConstructor:$,isView:V,isTypedArray:B,TypedArray:I,TypedArrayPrototype:S}},4659:function(e,t,o){var n=o(3724),l=o(4913),r=o(6980);e.exports=function(e,t,o){n?l.f(e,t,r(0,o)):e[t]=o}},4979:function(e,t,o){var n=o(6518),l=o(4576),r=o(7751),a=o(6980),i=o(4913).f,u=o(9297),c=o(679),s=o(3167),f=o(2603),v=o(5002),d=o(6193),p=o(3724),y=o(6395),m="DOMException",g=r("Error"),h=r(m),b=function(){c(this,_);var e=arguments.length,t=f(e<1?void 0:arguments[0]),o=f(e<2?void 0:arguments[1],"Error"),n=new h(t,o),l=new g(t);return l.name=m,i(n,"stack",a(1,d(l.stack,1))),s(n,this,b),n},_=b.prototype=h.prototype,w="stack"in new g(m),k="stack"in new h(1,2),E=h&&p&&Object.getOwnPropertyDescriptor(l,m),x=!!E&&!(E.writable&&E.configurable),R=w&&!x&&!k;n({global:!0,constructor:!0,forced:y||R},{DOMException:R?b:h});var A=r(m),T=A.prototype;if(T.constructor!==A)for(var C in y||i(T,"constructor",a(1,A)),v)if(u(v,C)){var I=v[C],S=I.s;u(A,S)||i(A,S,a(6,I.c))}},5002:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5854:function(e,t,o){var n=o(2777),l=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new l("Can't convert number to bigint");return BigInt(t)}},6080:function(e,t,o){var n=o(7476),l=o(9306),r=o(616),a=n(n.bind);e.exports=function(e,t){return l(e),void 0===t?e:r?a(e,t):function(){return e.apply(t,arguments)}}},6193:function(e,t,o){var n=o(9504),l=Error,r=n("".replace),a=function(e){return String(new l(e).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,u=i.test(a);e.exports=function(e,t){if(u&&"string"==typeof e&&!l.prepareStackTrace)while(t--)e=r(e,i,"");return e}},6269:function(e){e.exports={}},6706:function(e,t,o){var n=o(9504),l=o(9306);e.exports=function(e,t,o){try{return n(l(Object.getOwnPropertyDescriptor(e,t)[o]))}catch(r){}}},6801:function(e,t,o){var n=o(3724),l=o(8686),r=o(4913),a=o(8551),i=o(5397),u=o(1072);t.f=n&&!l?Object.defineProperties:function(e,t){a(e);var o,n=i(t),l=u(t),c=l.length,s=0;while(c>s)r.f(e,o=l[s++],n[o]);return e}},6955:function(e,t,o){var n=o(2140),l=o(4901),r=o(2195),a=o(8227),i=a("toStringTag"),u=Object,c="Arguments"===r(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(o){}};e.exports=n?r:function(e){var t,o,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=s(t=u(e),i))?o:c?r(t):"Object"===(n=r(t))&&l(t.callee)?"Arguments":n}},7476:function(e,t,o){var n=o(2195),l=o(9504);e.exports=function(e){if("Function"===n(e))return l(e)}},7588:function(e,t,o){var n=o(6518),l=o(9565),r=o(2652),a=o(9306),i=o(8551),u=o(1767),c=o(9539),s=o(4549),f=s("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:f},{forEach:function(e){i(this);try{a(e)}catch(n){c(this,"throw",n)}if(f)return l(f,this,e);var t=u(this),o=0;r(t,function(t){e(t,o++)},{IS_RECORD:!0})}})},7657:function(e,t,o){var n,l,r,a=o(9039),i=o(4901),u=o(34),c=o(2360),s=o(2787),f=o(6840),v=o(8227),d=o(6395),p=v("iterator"),y=!1;[].keys&&(r=[].keys(),"next"in r?(l=s(s(r)),l!==Object.prototype&&(n=l)):y=!0);var m=!u(n)||a(function(){var e={};return n[p].call(e)!==e});m?n={}:d&&(n=c(n)),i(n[p])||f(n,p,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:y}},7811:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},8111:function(e,t,o){var n=o(6518),l=o(4576),r=o(679),a=o(8551),i=o(4901),u=o(2787),c=o(2106),s=o(4659),f=o(9039),v=o(9297),d=o(8227),p=o(7657).IteratorPrototype,y=o(3724),m=o(6395),g="constructor",h="Iterator",b=d("toStringTag"),_=TypeError,w=l[h],k=m||!i(w)||w.prototype!==p||!f(function(){w({})}),E=function(){if(r(this,p),u(this)===p)throw new _("Abstract class Iterator not directly constructable")},x=function(e,t){y?c(p,e,{configurable:!0,get:function(){return t},set:function(t){if(a(this),this===p)throw new _("You can't redefine this property");v(this,e)?this[e]=t:s(this,e,t)}}):p[e]=t};v(p,b)||x(b,h),!k&&v(p,g)&&p[g]!==Object||x(g,E),E.prototype=p,n({global:!0,constructor:!0,forced:k},{Iterator:E})},9539:function(e,t,o){var n=o(9565),l=o(8551),r=o(5966);e.exports=function(e,t,o){var a,i;l(e);try{if(a=r(e,"return"),!a){if("throw"===t)throw o;return o}a=n(a,e)}catch(u){i=!0,a=u}if("throw"===t)throw o;if(i)throw a;return l(a),o}},9577:function(e,t,o){var n=o(9928),l=o(4644),r=o(1108),a=o(1291),i=o(5854),u=l.aTypedArray,c=l.getTypedArrayConstructor,s=l.exportTypedArrayMethod,f=function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}(),v=f&&function(){try{new Int8Array(1)["with"](-.5,1)}catch(e){return!0}}();s("with",{with:function(e,t){var o=u(this),l=a(e),s=r(o)?i(t):+t;return n(o,c(o),l,s)}}["with"],!f||v)},9928:function(e,t,o){var n=o(6198),l=o(1291),r=RangeError;e.exports=function(e,t,o,a){var i=n(e),u=l(o),c=u<0?i+u:u;if(c>=i||c<0)throw new r("Incorrect index");for(var s=new t(i),f=0;f<i;f++)s[f]=f===c?a:e[f];return s}}}]);